<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.js"></script>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        
        body {
            font-family: Helvetica, Arial, sans-serif;
      
   
        }
        
        select {
            position: absolute;
            right: 1%;
            top: 2%;
            z-index: 99999;
        }
        
        canvas {
            display: block;
        {
    </style>
    <title>DNO037</title>
</head>

<body>

    <select onchange="if (this.value) window.location.href=this.value">
        <option value="index.html" selected>Portada &rarr; index.html</option>
        <option value="graph.html">Gráfico &rarr; graph.html</option>
        <option value="mapa.html">Mundial &rarr; mapa.html</option>
    </select>

    <script>
        var url = "https://pomber.github.io/covid19/timeseries.json";

        var casos, italy, confirmados, muertos, recuperados;

        function preload() {
            casos = loadJSON(url);
        }

        function setup() {
            createCanvas(windowWidth, windowHeight).position(0, 0).style('z-index', -1);
            bolivia = casos.Bolivia;
            console.log(bolivia);
            confirmados = bolivia[bolivia.length - 1].confirmed;
            muertos = bolivia[bolivia.length - 1].deaths;
            recuperados = bolivia[bolivia.length - 1].recovered;
            console.log(confirmados);
            console.log(muertos);
            console.log(recuperados);
            noLoop();
        }

        function draw() {
            colorMode(HSB, 360, 100, 100);
            background(random(0, 360), 100, 75);
            colorMode(RGB);
            for (let x = 0; x <= confirmados - (muertos + recuperados); x++) {
                fill(255, 175);
                textSize(18);
                text('☹', random(20, width - 30), random(30, height - 20));
            }
            for (let x = 0; x <= muertos; x++) {
                fill(0, 175);
                textSize(18);
                text('☹', random(20, width - 30), random(30, height - 20));
            }
            for (let x = 0; x <= recuperados; x++) {
                fill(255, 255);
                textSize(18);
                text('☺', random(20, width - 30), random(30, height - 20));
            }
         
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
         }

        function setup() {
            noLoop(); // Esta función afectará al draw(). No se redibujará, solo se dibujará una vez.
            createP(url).position(27,18).style('font-size', 12+"px"); // Creo un párrafo cuyo texto es el contenido de la variable url
            createCanvas(windowWidth, windowHeight).position(0, 0).style('z-index', -1);
            /*
                A continuación voy a buscar el nombre Chile en el objeto contenido en la variable casos.
                Chile se escribe igual en castellano e inglés, no así Japan, Philippines, Russia, etc.
                El resultado de la búsqueda es lo que asigno como contenido a la variable chilenos.
            */
            nicaraguenses = casos.Nicaragua;
            console.log("Casos confirmados:");
        }
         }

            textSize(24);
            textAlign(CENTER);
            text("Hasta el día de ayer, había " + nicaraguenses[nicaraguenses.length - 1].confirmed.toLocaleString('es-ES') + " casos confirmados de COVID-19 en Nicaragua.", width / 2, height / 2);
            /*
                En la línea de arriba creo un texto dentro del canvas (ya creado en línea 39).
                Esto NO es lo mismo que crear un párrafo fuera del canvas. 
                Inspecciona elementos en tu navegador para aclarar la diferencia.
            */
        }
    </script>
</body>

</html>
